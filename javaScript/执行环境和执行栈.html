<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>执行环境和执行栈 | fe-tutorial</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/fe-tutorial/favicon.ico">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-163994034-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-163994034-1');
      </script>
    <meta name="description" content="前端学习笔记">
    
    <link rel="preload" href="/fe-tutorial/assets/css/0.styles.1a1809c8.css" as="style"><link rel="preload" href="/fe-tutorial/assets/js/app.9342356d.js" as="script"><link rel="preload" href="/fe-tutorial/assets/js/2.ae25ac57.js" as="script"><link rel="preload" href="/fe-tutorial/assets/js/50.4449ae3e.js" as="script"><link rel="prefetch" href="/fe-tutorial/assets/js/10.525a81ed.js"><link rel="prefetch" href="/fe-tutorial/assets/js/100.f6602289.js"><link rel="prefetch" href="/fe-tutorial/assets/js/11.a0441ad0.js"><link rel="prefetch" href="/fe-tutorial/assets/js/12.4085965f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/13.401309e1.js"><link rel="prefetch" href="/fe-tutorial/assets/js/14.9b6e0d73.js"><link rel="prefetch" href="/fe-tutorial/assets/js/15.3e7e5eea.js"><link rel="prefetch" href="/fe-tutorial/assets/js/16.4e3ca28b.js"><link rel="prefetch" href="/fe-tutorial/assets/js/17.0dced41e.js"><link rel="prefetch" href="/fe-tutorial/assets/js/18.fba6c83f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/19.6f6dc26e.js"><link rel="prefetch" href="/fe-tutorial/assets/js/20.456acb11.js"><link rel="prefetch" href="/fe-tutorial/assets/js/21.c8fea015.js"><link rel="prefetch" href="/fe-tutorial/assets/js/22.fcd64027.js"><link rel="prefetch" href="/fe-tutorial/assets/js/23.a8fb0f59.js"><link rel="prefetch" href="/fe-tutorial/assets/js/24.ad82ced8.js"><link rel="prefetch" href="/fe-tutorial/assets/js/25.9df5ece6.js"><link rel="prefetch" href="/fe-tutorial/assets/js/26.7e6047cb.js"><link rel="prefetch" href="/fe-tutorial/assets/js/27.3a93e0ca.js"><link rel="prefetch" href="/fe-tutorial/assets/js/28.db0473da.js"><link rel="prefetch" href="/fe-tutorial/assets/js/29.493f15fb.js"><link rel="prefetch" href="/fe-tutorial/assets/js/3.5753f381.js"><link rel="prefetch" href="/fe-tutorial/assets/js/30.9a2865d0.js"><link rel="prefetch" href="/fe-tutorial/assets/js/31.6a5c3f52.js"><link rel="prefetch" href="/fe-tutorial/assets/js/32.a1a21b0c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/33.6ff64d5f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/34.a0158bbc.js"><link rel="prefetch" href="/fe-tutorial/assets/js/35.c8a82d02.js"><link rel="prefetch" href="/fe-tutorial/assets/js/36.7fe42190.js"><link rel="prefetch" href="/fe-tutorial/assets/js/37.e5782722.js"><link rel="prefetch" href="/fe-tutorial/assets/js/38.92f2deb4.js"><link rel="prefetch" href="/fe-tutorial/assets/js/39.78a07463.js"><link rel="prefetch" href="/fe-tutorial/assets/js/4.bd705875.js"><link rel="prefetch" href="/fe-tutorial/assets/js/40.b82feb49.js"><link rel="prefetch" href="/fe-tutorial/assets/js/41.49ee1545.js"><link rel="prefetch" href="/fe-tutorial/assets/js/42.2bb4faf1.js"><link rel="prefetch" href="/fe-tutorial/assets/js/43.3f510967.js"><link rel="prefetch" href="/fe-tutorial/assets/js/44.bfa731dd.js"><link rel="prefetch" href="/fe-tutorial/assets/js/45.4f35d4b7.js"><link rel="prefetch" href="/fe-tutorial/assets/js/46.cf4f0367.js"><link rel="prefetch" href="/fe-tutorial/assets/js/47.20ad918b.js"><link rel="prefetch" href="/fe-tutorial/assets/js/48.90c6a427.js"><link rel="prefetch" href="/fe-tutorial/assets/js/49.5c079724.js"><link rel="prefetch" href="/fe-tutorial/assets/js/5.a826b837.js"><link rel="prefetch" href="/fe-tutorial/assets/js/51.d6e2154b.js"><link rel="prefetch" href="/fe-tutorial/assets/js/52.dfe4d3c3.js"><link rel="prefetch" href="/fe-tutorial/assets/js/53.d3c20efa.js"><link rel="prefetch" href="/fe-tutorial/assets/js/54.3148806d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/55.b6939cf6.js"><link rel="prefetch" href="/fe-tutorial/assets/js/56.534e810a.js"><link rel="prefetch" href="/fe-tutorial/assets/js/57.1755837a.js"><link rel="prefetch" href="/fe-tutorial/assets/js/58.17b55089.js"><link rel="prefetch" href="/fe-tutorial/assets/js/59.c307c0ec.js"><link rel="prefetch" href="/fe-tutorial/assets/js/6.65f0817d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/60.c9abe2e7.js"><link rel="prefetch" href="/fe-tutorial/assets/js/61.6ceb274b.js"><link rel="prefetch" href="/fe-tutorial/assets/js/62.4ea39c77.js"><link rel="prefetch" href="/fe-tutorial/assets/js/63.f920e26d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/64.6346a1cc.js"><link rel="prefetch" href="/fe-tutorial/assets/js/65.74bf2dfa.js"><link rel="prefetch" href="/fe-tutorial/assets/js/66.9084704e.js"><link rel="prefetch" href="/fe-tutorial/assets/js/67.775c1942.js"><link rel="prefetch" href="/fe-tutorial/assets/js/68.8b97b5cc.js"><link rel="prefetch" href="/fe-tutorial/assets/js/69.a7adc9f8.js"><link rel="prefetch" href="/fe-tutorial/assets/js/7.68e25475.js"><link rel="prefetch" href="/fe-tutorial/assets/js/70.c47676e5.js"><link rel="prefetch" href="/fe-tutorial/assets/js/71.edcc3be0.js"><link rel="prefetch" href="/fe-tutorial/assets/js/72.556f5bf4.js"><link rel="prefetch" href="/fe-tutorial/assets/js/73.2dcfa6d3.js"><link rel="prefetch" href="/fe-tutorial/assets/js/74.03cf5b2d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/75.216dc1fc.js"><link rel="prefetch" href="/fe-tutorial/assets/js/76.09754b05.js"><link rel="prefetch" href="/fe-tutorial/assets/js/77.e38d5475.js"><link rel="prefetch" href="/fe-tutorial/assets/js/78.b2101b14.js"><link rel="prefetch" href="/fe-tutorial/assets/js/79.482c65a8.js"><link rel="prefetch" href="/fe-tutorial/assets/js/8.a6d8756d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/80.4dac8fd0.js"><link rel="prefetch" href="/fe-tutorial/assets/js/81.d8b30993.js"><link rel="prefetch" href="/fe-tutorial/assets/js/82.7f8dd207.js"><link rel="prefetch" href="/fe-tutorial/assets/js/83.ff46804c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/84.b293b78f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/85.5bca4d7c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/86.52e73c0a.js"><link rel="prefetch" href="/fe-tutorial/assets/js/87.8c849f61.js"><link rel="prefetch" href="/fe-tutorial/assets/js/88.4e49087a.js"><link rel="prefetch" href="/fe-tutorial/assets/js/89.de7b6dec.js"><link rel="prefetch" href="/fe-tutorial/assets/js/9.a89dfe67.js"><link rel="prefetch" href="/fe-tutorial/assets/js/90.870983d3.js"><link rel="prefetch" href="/fe-tutorial/assets/js/91.c090b9e6.js"><link rel="prefetch" href="/fe-tutorial/assets/js/92.c71e4b31.js"><link rel="prefetch" href="/fe-tutorial/assets/js/93.f8e39aec.js"><link rel="prefetch" href="/fe-tutorial/assets/js/94.fd06b294.js"><link rel="prefetch" href="/fe-tutorial/assets/js/95.676f1624.js"><link rel="prefetch" href="/fe-tutorial/assets/js/96.06c535ea.js"><link rel="prefetch" href="/fe-tutorial/assets/js/97.dd86fb84.js"><link rel="prefetch" href="/fe-tutorial/assets/js/98.b78c0a67.js"><link rel="prefetch" href="/fe-tutorial/assets/js/99.64fb0d9b.js">
    <link rel="stylesheet" href="/fe-tutorial/assets/css/0.styles.1a1809c8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-tutorial/" class="home-link router-link-active"><!----> <span class="site-name">fe-tutorial</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe-tutorial/javaScript/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/fe-tutorial/algo/" class="nav-link">
  数据结构和算法
</a></div><div class="nav-item"><a href="/fe-tutorial/network/" class="nav-link">
  网络协议
</a></div><div class="nav-item"><a href="/fe-tutorial/fee/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="https://niexia.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/niexia/fe-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe-tutorial/javaScript/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/fe-tutorial/algo/" class="nav-link">
  数据结构和算法
</a></div><div class="nav-item"><a href="/fe-tutorial/network/" class="nav-link">
  网络协议
</a></div><div class="nav-item"><a href="/fe-tutorial/fee/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="https://niexia.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/niexia/fe-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-tutorial/javaScript/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/fe-tutorial/javaScript/执行环境和执行栈.html" class="active sidebar-link">执行环境和执行栈</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#执行环境" class="sidebar-link">执行环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#执行环境类型" class="sidebar-link">执行环境类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#执行栈" class="sidebar-link">执行栈</a></li><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#创建执行环境" class="sidebar-link">创建执行环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#创建阶段" class="sidebar-link">创建阶段</a></li><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#变量环境" class="sidebar-link">变量环境</a></li><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#执行阶段" class="sidebar-link">执行阶段</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-tutorial/javaScript/执行环境和执行栈.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/fe-tutorial/javaScript/作用域和闭包.html" class="sidebar-link">作用域和闭包</a></li><li><a href="/fe-tutorial/javaScript/this.html" class="sidebar-link">this</a></li><li><a href="/fe-tutorial/javaScript/对象、原型和原型链.html" class="sidebar-link">对象、原型和原型链</a></li><li><a href="/fe-tutorial/javaScript/实现继承.html" class="sidebar-link">实现继承</a></li><li><a href="/fe-tutorial/javaScript/实现new.html" class="sidebar-link">实现 new</a></li><li><a href="/fe-tutorial/javaScript/实现call,apply和bind.html" class="sidebar-link">call、apply 和 bind</a></li><li><a href="/fe-tutorial/javaScript/实现instanceof.html" class="sidebar-link">实现 instanceof</a></li><li><a href="/fe-tutorial/javaScript/深拷贝和浅拷贝.html" class="sidebar-link">深拷贝和浅拷贝</a></li><li><a href="/fe-tutorial/javaScript/节流函数和防抖函数.html" class="sidebar-link">节流函数和防抖函数</a></li><li><a href="/fe-tutorial/javaScript/高阶函数.html" class="sidebar-link">高阶函数</a></li><li><a href="/fe-tutorial/javaScript/函数柯里化.html" class="sidebar-link">函数柯里化</a></li><li><a href="/fe-tutorial/javaScript/EventEmitter.html" class="sidebar-link">EventEmitter</a></li><li><a href="/fe-tutorial/javaScript/实现Promise.html" class="sidebar-link">/javaScript/实现Promise.html</a></li><li><a href="/fe-tutorial/javaScript/实现异步打印.html" class="sidebar-link">实现异步打印</a></li><li><a href="/fe-tutorial/javaScript/数组去重,扁平化和最值.html" class="sidebar-link">数组去重，扁平化和最值</a></li><li><a href="/fe-tutorial/javaScript/数组乱序.html" class="sidebar-link">数组乱序</a></li><li><a href="/fe-tutorial/javaScript/懒加载.html" class="sidebar-link">懒加载</a></li><li><a href="/fe-tutorial/javaScript/无限滚动.html" class="sidebar-link">无限滚动</a></li><li><a href="/fe-tutorial/javaScript/虚拟滚动.html" class="sidebar-link">/javaScript/虚拟滚动.html</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>RegExp</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-tutorial/javaScript/RegExp/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/fe-tutorial/javaScript/RegExp/RegExp的属性和方法.html" class="sidebar-link">RegExp 的属性和方法</a></li><li><a href="/fe-tutorial/javaScript/RegExp/应用.html" class="sidebar-link">应用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器工作原理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-tutorial/javaScript/browser/浏览器的多进程和JS单线程.html" class="sidebar-link">浏览器的多进程和JS单线程</a></li><li><a href="/fe-tutorial/javaScript/browser/浏览器渲染过程.html" class="sidebar-link">浏览器的渲染过程</a></li><li><a href="/fe-tutorial/javaScript/browser/EventLoop.html" class="sidebar-link">Event Loop</a></li><li><a href="/fe-tutorial/javaScript/browser/栈空间和堆空间.html" class="sidebar-link">栈空间和堆空间</a></li><li><a href="/fe-tutorial/javaScript/browser/垃圾回收.html" class="sidebar-link">垃圾回收</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>性能优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-tutorial/javaScript/effective/性能优化.html" class="sidebar-link">性能优化</a></li><li><a href="/fe-tutorial/javaScript/effective/DNS缓存和预解析.html" class="sidebar-link">DNS 缓存和预解析</a></li><li><a href="/fe-tutorial/javaScript/effective/减少请求次数和体积.html" class="sidebar-link">减少请求次数和体积</a></li><li><a href="/fe-tutorial/javaScript/effective/利用缓存.html" class="sidebar-link">利用缓存</a></li><li><a href="/fe-tutorial/javaScript/effective/CDN.html" class="sidebar-link">CDN</a></li><li><a href="/fe-tutorial/javaScript/effective/浏览器渲染机制和优化.html" class="sidebar-link">浏览器渲染机制和优化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="执行环境和执行栈"><a href="#执行环境和执行栈" class="header-anchor">#</a> 执行环境和执行栈</h1> <p>理解执行环境（也叫执行上下文）有助于我们理解其他 JS 的概念，例如提升机制、作用域和闭包等。</p> <h2 id="执行环境"><a href="#执行环境" class="header-anchor">#</a> 执行环境</h2> <p>执行环境（也叫执行上下文）是 JS 中最为重要的一个概念。执行环境定义了变量，或者是函数有权访问的其他数据，决定了它们各自的行为。每个执行环境有一个与之关联的<strong>变量对象</strong>（variable object），执行环境中定义的变量和函数都保存在这个对象中。虽然我们在代码里无法直接访问，但是解析器在处理数据的时候会使用它。</p> <p>当某个执行环境中所有代码执行完毕之后，该上下文就会被销毁，保存在其中的所有变量和函数定义也随之销毁（全局执行环境直到应用程序退出，例如关闭网页或浏览器，才会销毁）。</p> <h3 id="执行环境类型"><a href="#执行环境类型" class="header-anchor">#</a> 执行环境类型</h3> <p>执行环境有三种类型：</p> <ol><li>全局执行环境</li></ol> <p>这是默认的，也是最基础的执行环境，也是最外围的一个执行环境。不同的宿主环境中，表示执行环境的对象也不一样，在 Web 浏览器对应的是 <code>window</code> 对象。</p> <ol start="2"><li>函数执行环境</li></ol> <p>每个函数都有自己的执行环境。当调用执行一个函数时，就会为该函数创建一个执行环境，然后推入一个<strong>栈</strong>中。而在执行之后，栈将其上下文弹出，把控制权返回给之前的执行环境。一个程序可以存在任意数量的函数执行环境。</p> <ol start="3"><li>Eval 函数执行环境</li></ol> <p>运行在 <code>eval</code> 函数中的代码也获得自己的执行环境，<code>eval</code> 并不常用，它会影响执行效率。</p> <h2 id="执行栈"><a href="#执行栈" class="header-anchor">#</a> 执行栈</h2> <p>执行栈，也叫调用栈，用于存储代码执行期间创建的所有执行环境。</p> <p>当 JavaScript 引擎首次读取你的脚本时，它会创建一个全局执行环境并将其推入当前的执行栈。每当发生一个函数调用，引擎都会为该函数创建一个新的执行环境并将其推到当前执行栈的顶端。</p> <p>引擎会运行执行环境在执行栈顶端的函数，当此函数运行完成后，其对应的执行环境将会从执行栈中弹出，上下文控制权将移到当前执行栈的下一个执行环境。</p> <p>看一个样例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'Hello World!'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inside first function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Again inside first function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inside second function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

<span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Inside Global Execution Context'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><img src="data:image/png;base64,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" alt="call-stack"></p> <p>当上述代码在浏览器中加载时，JavaScript 引擎会创建一个全局执行环境并且将它推入当前的执行栈。当调用 <code>first()</code> 函数时，JavaScript 引擎为该函数创建了一个新的执行环境并将其推到当前执行栈的顶端。</p> <p>当在 <code>first()</code> 函数中调用 <code>second()</code> 函数时，Javascript 引擎为该函数创建了一个新的执行环境并将其推到当前执行栈的顶端。当 <code>second()</code> 函数执行完成后，它的执行环境从当前执行栈中弹出，上下文控制权将移到当前执行栈的下一个执行环境，即 <code>first()</code> 函数的执行环境。</p> <p>当 <code>first()</code> 函数执行完成后，它的执行环境从当前执行栈中弹出，上下文控制权将移到全局执行环境。一旦所有代码执行完毕，Javascript 引擎把全局执行环境从执行栈中移除。</p> <h2 id="创建执行环境"><a href="#创建执行环境" class="header-anchor">#</a> 创建执行环境</h2> <p>到目前为止，已经知道 JavaScript 是如何管理执行环境的了，接下来看一下 JavaScript 是如何创建执行环境的。</p> <p>执行环境分两个阶段：<strong>创建阶段</strong>和<strong>执行阶段</strong>。</p> <h3 id="创建阶段"><a href="#创建阶段" class="header-anchor">#</a> 创建阶段</h3> <p>代码没有执行前都属于这个阶段，在这个阶段总共发生了三件事：</p> <ol><li>确定 <code>this</code>，也称为 <code>this</code> 绑定。</li> <li>词法环境（LexicalEnvironment）组件被创建。</li> <li>变量环境（VariableEnvironment）组件被创建。</li></ol> <p>因此，执行环境在概念上可以表示为：</p> <div class="language- extra-class"><pre class="language-text"><code>ExecutionContext = {  
  ThisBinding = &lt;this value&gt;,  
  LexicalEnvironment = { ... },  
  VariableEnvironment = { ... },  
}
</code></pre></div><h4 id="this-绑定"><a href="#this-绑定" class="header-anchor">#</a> this 绑定</h4> <p>在全局环境中，<code>this</code> 指向全局对象，即 <code>window</code> 对象。在函数中，<code>this</code> 只有执行的时候才能确定，取决于函数的调用方式。</p> <h4 id="词法环境-lexical-environment"><a href="#词法环境-lexical-environment" class="header-anchor">#</a> 词法环境（Lexical Environment）</h4> <p>ES6 文档将词法环境定义为</p> <blockquote><p>词法环境是一种规范类型，基于 ECMAScript 代码的词法嵌套结构来定义标识符与特定变量和函数的关联关系。词法环境由环境记录（environment record）和可能为空引用（null）的外部词法环境组成。</p></blockquote> <p>也就是说词法环境由两个部分组成：<strong>环境记录</strong>和<strong>对外环境的引用</strong>。</p> <ol><li>环境记录：存储变量和函数声明的实际位置。</li> <li>对外部环境的引用：可以访问的外部词法环境。</li></ol> <p>词法环境有两种类型：</p> <ol><li>全局环境：没有外部环境引用的词法环境。它在全局环境中，外部引用环境引用为 <code>null</code>，它拥有一个全局对象（window 对象）及其关联的方法和属性，以及任何用户自定义的全局变量。</li> <li>函数环境：用户在函数中定义的变量存储在环境记录中，外部环境的引用可以是全局环境，也可以是包含内部函数的外部函数环境。</li></ol> <p>对于函数环境而言，<strong>环境记录还包含一个 <code>arguments</code> 对象</strong>，该对象包含了索引和传递给函数参数之间的映射以及传递给函数参数的长度（数量）。</p> <p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// arguments 对象</span>
Arguments<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
</code></pre></div><p>词法环境的环境记录也有两种：</p> <ol><li>声明性环境记录：存储变量、函数和参数。<strong>一个函数环境包含声明性环境记录</strong>。</li> <li>对象环境记录：用于定义在全局执行上下文中出现的变量和函数的关联。<strong>全局环境包含对象环境记录</strong>。</li></ol> <p>抽象地说，词法环境在伪代码中开起来像这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 全局环境</span>
GlobalExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>  
  LexicalEnvironment<span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">// 词法环境</span>
    EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 环境记录</span>
      Type<span class="token operator">:</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>     <span class="token comment">// 对象环境记录</span>
      <span class="token comment">// 标识符绑定在这里 </span>
    outer<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span>         <span class="token comment">// 对外环境的引用</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>

<span class="token comment">// 函数环境</span>
FunctionExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>  
  LexicalEnvironment<span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token comment">// 词法环境</span>
    EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token comment">// 环境记录</span>
      Type<span class="token operator">:</span> <span class="token string">&quot;Declarative&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 声明性环境记录</span>
      <span class="token comment">// 标识符绑定在这里 </span>
    outer<span class="token operator">:</span> <span class="token operator">&lt;</span>Global or outer <span class="token keyword">function</span> environment reference<span class="token operator">&gt;</span> <span class="token comment">// 对外环境的引用 </span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre></div><h3 id="变量环境"><a href="#变量环境" class="header-anchor">#</a> 变量环境</h3> <p>变量环境也是一个词法环境，因此它具有上面定义的词法环境的所有属性。</p> <p>变量环境的环境记录包含了由 VariableStatements 在此执行上下文创建的绑定。在 ES6 中，LexicalEnvironment 组件和 VariableEnvironment 组件的<strong>区别</strong>在于前者用于存储函数声明和变量（<code>let</code> 和 <code>const</code>）绑定，而后者仅用于存储变量（<code>var</code>）绑定。</p> <p>让我们结合一些代码示例来理解上述概念：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>  
<span class="token keyword">var</span> c<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
 <span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>  
 <span class="token keyword">return</span> e <span class="token operator">*</span> f <span class="token operator">*</span> g<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>

c <span class="token operator">=</span> <span class="token function">multiply</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这段代码的执行环境如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 全局执行环境</span>
GlobalExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>

  ThisBinding<span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object<span class="token operator">&gt;</span><span class="token punctuation">,</span>

  LexicalEnvironment<span class="token operator">:</span> <span class="token punctuation">{</span>  
    EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span>  
      Type<span class="token operator">:</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>  
      <span class="token comment">// 标识符绑定在这里  </span>
      a<span class="token operator">:</span> <span class="token operator">&lt;</span> uninitialized <span class="token operator">&gt;</span><span class="token punctuation">,</span>  
      b<span class="token operator">:</span> <span class="token operator">&lt;</span> uninitialized <span class="token operator">&gt;</span><span class="token punctuation">,</span>  
      multiply<span class="token operator">:</span> <span class="token operator">&lt;</span> func <span class="token operator">&gt;</span>  
    <span class="token punctuation">}</span>  
    outer<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span>  
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  VariableEnvironment<span class="token operator">:</span> <span class="token punctuation">{</span>  
    EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span>  
      Type<span class="token operator">:</span> <span class="token string">&quot;Object&quot;</span><span class="token punctuation">,</span>  
      <span class="token comment">// 标识符绑定在这里  </span>
      c<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>  
    <span class="token punctuation">}</span>  
    outer<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token keyword">null</span><span class="token operator">&gt;</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>

<span class="token comment">// 函数执行环境</span>
FunctionExectionContext <span class="token operator">=</span> <span class="token punctuation">{</span>  
   
  ThisBinding<span class="token operator">:</span> <span class="token operator">&lt;</span>Global Object<span class="token operator">&gt;</span><span class="token punctuation">,</span>

  LexicalEnvironment<span class="token operator">:</span> <span class="token punctuation">{</span>  
    EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span>  
      Type<span class="token operator">:</span> <span class="token string">&quot;Declarative&quot;</span><span class="token punctuation">,</span>  
      <span class="token comment">// 标识符绑定在这里  </span>
      Arguments<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    outer<span class="token operator">:</span> <span class="token operator">&lt;</span>GlobalLexicalEnvironment<span class="token operator">&gt;</span>  
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  VariableEnvironment<span class="token operator">:</span> <span class="token punctuation">{</span>  
    EnvironmentRecord<span class="token operator">:</span> <span class="token punctuation">{</span>  
      Type<span class="token operator">:</span> <span class="token string">&quot;Declarative&quot;</span><span class="token punctuation">,</span>  
      <span class="token comment">// 标识符绑定在这里  </span>
      g<span class="token operator">:</span> <span class="token keyword">undefined</span>  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  
    outer<span class="token operator">:</span> <span class="token operator">&lt;</span>GlobalLexicalEnvironment<span class="token operator">&gt;</span>  
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre></div><p>只有在遇到函数 <code>multiply</code> 的调用时才会创建函数执行上下文。</p> <p>你可能已经注意到了 <code>let</code> 和 <code>const</code> 定义的变量没有任何与之关联的值，但 <code>var</code> 定义的变量设置为 undefined。</p> <p>这是因为在创建阶段，代码会被扫描并解析变量和函数声明，其中函数声明存储在环境中，而变量会被设置为 <code>undefined</code>（在 <code>var</code> 的情况下）或保持未初始化（在 <code>let</code> 和 <code>const</code> 的情况下）。</p> <p>这就是为什么你可以在声明之前访问 <code>var</code> 定义的变量（尽管是 <code>undefined</code> ），但如果在声明之前访问 <code>let</code> 和 <code>const</code> 定义的变量就会提示引用错误的原因。</p> <p>这就是我们所谓的变量提升。</p> <h3 id="执行阶段"><a href="#执行阶段" class="header-anchor">#</a> 执行阶段</h3> <p>这是整篇文章中最简单的部分。在此阶段，完成对所有变量的分配，最后执行代码。</p> <p><strong>注意</strong>：在执行阶段，如果 Javascript 引擎在源代码中声明的实际位置找不到 let 变量的值，那么将为其分配 <code>undefined</code> 值。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://book.douban.com/subject/10546125/" target="_blank" rel="noopener noreferrer">JavaScript 高级程序设计（第3版）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5bdfd3e151882516c6432c32" target="_blank" rel="noopener noreferrer">【译】理解 Javascript 执行上下文和执行栈<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/niexia/fe-tutorial/edit/master/javaScript/执行环境和执行栈.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">11/4/2019, 4:23:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe-tutorial/javaScript/" class="prev router-link-active">
        介绍
      </a></span> <span class="next"><a href="/fe-tutorial/javaScript/作用域和闭包.html">
        作用域和闭包
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fe-tutorial/assets/js/app.9342356d.js" defer></script><script src="/fe-tutorial/assets/js/2.ae25ac57.js" defer></script><script src="/fe-tutorial/assets/js/50.4449ae3e.js" defer></script>
  </body>
</html>
