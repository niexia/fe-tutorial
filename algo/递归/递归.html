<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>递归 | fe-tutorial</title>
    <meta name="description" content="前端学习笔记">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/fe-tutorial/favicon.ico">
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-163994034-1"></script>
  <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-163994034-1');
      </script>
    
    <link rel="preload" href="/fe-tutorial/assets/css/0.styles.cbc7dab0.css" as="style"><link rel="preload" href="/fe-tutorial/assets/js/app.c67e16a5.js" as="script"><link rel="preload" href="/fe-tutorial/assets/js/2.16b1dcc2.js" as="script"><link rel="preload" href="/fe-tutorial/assets/js/39.90f3797f.js" as="script"><link rel="prefetch" href="/fe-tutorial/assets/js/10.28bac185.js"><link rel="prefetch" href="/fe-tutorial/assets/js/11.1e1c0df4.js"><link rel="prefetch" href="/fe-tutorial/assets/js/12.20001f33.js"><link rel="prefetch" href="/fe-tutorial/assets/js/13.fd3b0296.js"><link rel="prefetch" href="/fe-tutorial/assets/js/14.39e61b8a.js"><link rel="prefetch" href="/fe-tutorial/assets/js/15.5174a1f6.js"><link rel="prefetch" href="/fe-tutorial/assets/js/16.457c6abe.js"><link rel="prefetch" href="/fe-tutorial/assets/js/17.3940c003.js"><link rel="prefetch" href="/fe-tutorial/assets/js/18.7c79b87e.js"><link rel="prefetch" href="/fe-tutorial/assets/js/19.8bd17825.js"><link rel="prefetch" href="/fe-tutorial/assets/js/20.ad7c323a.js"><link rel="prefetch" href="/fe-tutorial/assets/js/21.90eff1bc.js"><link rel="prefetch" href="/fe-tutorial/assets/js/22.c6f37039.js"><link rel="prefetch" href="/fe-tutorial/assets/js/23.a1ad3ef5.js"><link rel="prefetch" href="/fe-tutorial/assets/js/24.bb7136e6.js"><link rel="prefetch" href="/fe-tutorial/assets/js/25.1050e0be.js"><link rel="prefetch" href="/fe-tutorial/assets/js/26.c23747f5.js"><link rel="prefetch" href="/fe-tutorial/assets/js/27.3e9abcdb.js"><link rel="prefetch" href="/fe-tutorial/assets/js/28.2d1ac800.js"><link rel="prefetch" href="/fe-tutorial/assets/js/29.3ad09fe2.js"><link rel="prefetch" href="/fe-tutorial/assets/js/3.1922b998.js"><link rel="prefetch" href="/fe-tutorial/assets/js/30.c6081425.js"><link rel="prefetch" href="/fe-tutorial/assets/js/31.9807a5ae.js"><link rel="prefetch" href="/fe-tutorial/assets/js/32.09f134ec.js"><link rel="prefetch" href="/fe-tutorial/assets/js/33.5d0a6f6f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/34.747dd02c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/35.5e5cf192.js"><link rel="prefetch" href="/fe-tutorial/assets/js/36.f0037692.js"><link rel="prefetch" href="/fe-tutorial/assets/js/37.cc0a94ec.js"><link rel="prefetch" href="/fe-tutorial/assets/js/38.20f8eed9.js"><link rel="prefetch" href="/fe-tutorial/assets/js/4.2f5865f5.js"><link rel="prefetch" href="/fe-tutorial/assets/js/40.af7314a4.js"><link rel="prefetch" href="/fe-tutorial/assets/js/41.35cf16df.js"><link rel="prefetch" href="/fe-tutorial/assets/js/42.c9641b78.js"><link rel="prefetch" href="/fe-tutorial/assets/js/43.e36effd3.js"><link rel="prefetch" href="/fe-tutorial/assets/js/44.4fd14390.js"><link rel="prefetch" href="/fe-tutorial/assets/js/45.573de03d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/46.480dfa83.js"><link rel="prefetch" href="/fe-tutorial/assets/js/47.43f26ad2.js"><link rel="prefetch" href="/fe-tutorial/assets/js/48.17533853.js"><link rel="prefetch" href="/fe-tutorial/assets/js/49.9626386e.js"><link rel="prefetch" href="/fe-tutorial/assets/js/5.7116cd28.js"><link rel="prefetch" href="/fe-tutorial/assets/js/50.ca1c77cf.js"><link rel="prefetch" href="/fe-tutorial/assets/js/51.78e28db3.js"><link rel="prefetch" href="/fe-tutorial/assets/js/52.1dc3a702.js"><link rel="prefetch" href="/fe-tutorial/assets/js/53.0019597b.js"><link rel="prefetch" href="/fe-tutorial/assets/js/54.662e6eec.js"><link rel="prefetch" href="/fe-tutorial/assets/js/55.0dbe2917.js"><link rel="prefetch" href="/fe-tutorial/assets/js/56.324663f2.js"><link rel="prefetch" href="/fe-tutorial/assets/js/57.4cd3ba6d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/58.08634db8.js"><link rel="prefetch" href="/fe-tutorial/assets/js/59.0bd63f76.js"><link rel="prefetch" href="/fe-tutorial/assets/js/6.e033b4ef.js"><link rel="prefetch" href="/fe-tutorial/assets/js/60.2dee6b1f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/61.32442cb1.js"><link rel="prefetch" href="/fe-tutorial/assets/js/62.f68f7fb7.js"><link rel="prefetch" href="/fe-tutorial/assets/js/63.6df1d006.js"><link rel="prefetch" href="/fe-tutorial/assets/js/64.a0cc5d1a.js"><link rel="prefetch" href="/fe-tutorial/assets/js/65.04b0799d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/66.19d47570.js"><link rel="prefetch" href="/fe-tutorial/assets/js/67.3926c4ae.js"><link rel="prefetch" href="/fe-tutorial/assets/js/68.35b49e91.js"><link rel="prefetch" href="/fe-tutorial/assets/js/69.6c259614.js"><link rel="prefetch" href="/fe-tutorial/assets/js/7.dd4a338c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/70.fa7dbe04.js"><link rel="prefetch" href="/fe-tutorial/assets/js/71.43adb68c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/72.daa1c87e.js"><link rel="prefetch" href="/fe-tutorial/assets/js/73.f4020d8c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/74.14e590f8.js"><link rel="prefetch" href="/fe-tutorial/assets/js/75.b99e90d1.js"><link rel="prefetch" href="/fe-tutorial/assets/js/76.3cc19da7.js"><link rel="prefetch" href="/fe-tutorial/assets/js/77.3591aa10.js"><link rel="prefetch" href="/fe-tutorial/assets/js/78.a0a02177.js"><link rel="prefetch" href="/fe-tutorial/assets/js/79.1d272f02.js"><link rel="prefetch" href="/fe-tutorial/assets/js/8.93f67fc6.js"><link rel="prefetch" href="/fe-tutorial/assets/js/80.96f4df9d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/81.34c02b35.js"><link rel="prefetch" href="/fe-tutorial/assets/js/82.47ef3169.js"><link rel="prefetch" href="/fe-tutorial/assets/js/83.134baf38.js"><link rel="prefetch" href="/fe-tutorial/assets/js/84.0344390f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/85.aa20e28d.js"><link rel="prefetch" href="/fe-tutorial/assets/js/86.dd9be34f.js"><link rel="prefetch" href="/fe-tutorial/assets/js/87.0dff61b3.js"><link rel="prefetch" href="/fe-tutorial/assets/js/88.ff87edf2.js"><link rel="prefetch" href="/fe-tutorial/assets/js/89.8e7a798c.js"><link rel="prefetch" href="/fe-tutorial/assets/js/9.f4d31957.js"><link rel="prefetch" href="/fe-tutorial/assets/js/90.1c0369c7.js"><link rel="prefetch" href="/fe-tutorial/assets/js/91.cb532216.js"><link rel="prefetch" href="/fe-tutorial/assets/js/92.f7f05b93.js"><link rel="prefetch" href="/fe-tutorial/assets/js/93.b5026686.js"><link rel="prefetch" href="/fe-tutorial/assets/js/94.2de0df47.js"><link rel="prefetch" href="/fe-tutorial/assets/js/95.a22e8fed.js"><link rel="prefetch" href="/fe-tutorial/assets/js/96.d9450d6e.js"><link rel="prefetch" href="/fe-tutorial/assets/js/97.dd9b9637.js"><link rel="prefetch" href="/fe-tutorial/assets/js/98.352197bd.js">
    <link rel="stylesheet" href="/fe-tutorial/assets/css/0.styles.cbc7dab0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-tutorial/" class="home-link router-link-active"><!----> <span class="site-name">fe-tutorial</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe-tutorial/javaScript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/fe-tutorial/algo/" class="nav-link router-link-active">
  数据结构和算法
</a></div><div class="nav-item"><a href="/fe-tutorial/network/" class="nav-link">
  网络协议
</a></div><div class="nav-item"><a href="/fe-tutorial/fee/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="https://niexias.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/niexias/fe-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe-tutorial/javaScript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/fe-tutorial/algo/" class="nav-link router-link-active">
  数据结构和算法
</a></div><div class="nav-item"><a href="/fe-tutorial/network/" class="nav-link">
  网络协议
</a></div><div class="nav-item"><a href="/fe-tutorial/fee/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><a href="https://niexias.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  个人博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/niexias/fe-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>数据结构和算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-tutorial/algo/" class="sidebar-link">介绍</a></li><li><a href="/fe-tutorial/algo/数组/数组.html" class="sidebar-link">数组</a></li><li><a href="/fe-tutorial/algo/链表/链表.html" class="sidebar-link">链表</a></li><li><a href="/fe-tutorial/algo/链表/手写链表的技巧.html" class="sidebar-link">手写链表的技巧</a></li><li><a href="/fe-tutorial/algo/栈/栈.html" class="sidebar-link">栈</a></li><li><a href="/fe-tutorial/algo/递归/递归.html" class="active sidebar-link">递归</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-tutorial/algo/递归/递归.html#什么是递归" class="sidebar-link">什么是递归</a></li><li class="sidebar-sub-header"><a href="/fe-tutorial/algo/递归/递归.html#递归存在的问题" class="sidebar-link">递归存在的问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-tutorial/algo/递归/递归.html#堆栈溢出" class="sidebar-link">堆栈溢出</a></li><li class="sidebar-sub-header"><a href="/fe-tutorial/algo/递归/递归.html#重复计算" class="sidebar-link">重复计算</a></li></ul></li></ul></li><li><a href="/fe-tutorial/algo/排序/排序.html" class="sidebar-link">排序算法介绍</a></li><li><a href="/fe-tutorial/algo/排序/冒泡、插入和选择排序.html" class="sidebar-link">冒泡、插入和选择排序</a></li><li><a href="/fe-tutorial/algo/排序/归并排序和快速排序.html" class="sidebar-link">归并排序和快速排序</a></li><li><a href="/fe-tutorial/algo/排序/桶排序、计数排序和基数排序.html" class="sidebar-link">桶排序、计数排序和基数排序</a></li><li><a href="/fe-tutorial/algo/排序/排序优化.html" class="sidebar-link">排序优化</a></li><li><a href="/fe-tutorial/algo/二分查找/二分查找.html" class="sidebar-link">二分查找</a></li><li><a href="/fe-tutorial/algo/二分查找/二分查找的变形.html" class="sidebar-link">二分查找的变形</a></li><li><a href="/fe-tutorial/algo/跳表/跳表.html" class="sidebar-link">跳表</a></li><li><a href="/fe-tutorial/algo/散列表/散列表.html" class="sidebar-link">散列表</a></li><li><a href="/fe-tutorial/algo/哈希算法/哈希算法.html" class="sidebar-link">哈希算法</a></li><li><a href="/fe-tutorial/algo/二叉树/二叉树.html" class="sidebar-link">二叉树</a></li><li><a href="/fe-tutorial/algo/二叉树/二叉查找树.html" class="sidebar-link">二叉查找树</a></li><li><a href="/fe-tutorial/algo/二叉树/红黑树.html" class="sidebar-link">红黑树</a></li><li><a href="/fe-tutorial/algo/堆/堆和堆排序.html" class="sidebar-link">堆</a></li><li><a href="/fe-tutorial/algo/堆/堆的应用.html" class="sidebar-link">堆的应用</a></li><li><a href="/fe-tutorial/algo/图/图.html" class="sidebar-link">图</a></li><li><a href="/fe-tutorial/algo/图/深度和广度优先搜索.html" class="sidebar-link">深度优先和广度优先搜索</a></li><li><a href="/fe-tutorial/algo/字符串匹配/BF算法和RK算法.html" class="sidebar-link">BF 算法和 RK 算法</a></li><li><a href="/fe-tutorial/algo/字符串匹配/BM算法.html" class="sidebar-link">/algo/字符串匹配/BM算法.html</a></li><li><a href="/fe-tutorial/algo/字符串匹配/KMP算法.html" class="sidebar-link">/algo/字符串匹配/KMP算法.html</a></li><li><a href="/fe-tutorial/algo/Tire树/Tire树.html" class="sidebar-link">Tire 树</a></li><li><a href="/fe-tutorial/algo/贪心算法/贪心算法.html" class="sidebar-link">贪心算法</a></li><li><a href="/fe-tutorial/algo/分治算法/分治算法.html" class="sidebar-link">分治算法</a></li><li><a href="/fe-tutorial/algo/回溯算法/回溯算法.html" class="sidebar-link">回溯算法</a></li><li><a href="/fe-tutorial/algo/动态规划/动态规划.html" class="sidebar-link">动态规划</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>LeetCode</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fe-tutorial/algo/leetcode/数组.html" class="sidebar-link">数组</a></li><li><a href="/fe-tutorial/algo/leetcode/链表.html" class="sidebar-link">链表</a></li><li><a href="/fe-tutorial/algo/leetcode/队列.html" class="sidebar-link">队列</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="递归"><a href="#递归" class="header-anchor">#</a> 递归</h1> <h2 id="什么是递归"><a href="#什么是递归" class="header-anchor">#</a> 什么是递归</h2> <blockquote><p>递归是在函数的内部用到自身。</p></blockquote> <p>看起来很绕，简单的理解是<strong>自己调用自己，有递有归，有终止条件</strong>。</p> <p>递归要满足三个条件：</p> <ol><li>一个问题的解可以分解为几个子问题的解</li> <li>问题与所分解的子问题，处理数据规模不同，求解思路完全一样</li> <li>存在递归终止条件</li></ol> <p><strong>分析递归问题时，关键是找到规律，将大问题分解成小问题，并且基于此写出递归公式，确定终止条件，最后将递推公式和终止条件翻译成代码</strong>。值得注意的是，一个问题可以分解为一个子问题，也可以分解成多个子问题来求解。而在写递归的代码时，应该关注的是，问题与子问题的关系，而不要一层层的思考子问题与子子问题，子子问题与子子子问题的关系。视图去理解每一层的调用关系，很容易就绕进去了。</p> <h2 id="递归存在的问题"><a href="#递归存在的问题" class="header-anchor">#</a> 递归存在的问题</h2> <p>递归的代码往往很简洁，但是实际开发中，编写递归代码时，会遇到一些问题</p> <h3 id="堆栈溢出"><a href="#堆栈溢出" class="header-anchor">#</a> 堆栈溢出</h3> <p>函数调用的时候是通过栈来保存临时变量的。每调用一个函数，都会将临时变量封装为栈帧压入内存栈，等函数执行完成返回时，才出栈。当递归求解的数据规模很大，调用层次很深，一直压入栈就会存在堆栈溢出的风险。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">200000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以通过一下两种方法来处理：</p> <p><strong>1. 限制递归深度</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> depth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">++</span>depth<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>depth <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'exception'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>但是这种做法不能完全解决问题，因为最大允许递归深度和当前线程剩余的栈空间大小有关，事先无法计算。</p> <p><strong>2. 将递归代码改为非递归代码</strong></p> <p>针对存在的栈溢出问题，可以根据实际情况是否需要递归的方式来实现。实际上，可以将一个递归代码改为非递归。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 终止条件的结果</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="重复计算"><a href="#重复计算" class="header-anchor">#</a> 重复计算</h3> <p>使用递归的时候还会出现重复计算的问题。例如下面的代码，把整个递归过程分解一下，你会发现一些计算其实是重复的，<code>f(3)</code> 被求解了两次</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="replicationComputation"></p> <p>所以可以通过保存已经求解过的 <code>f(k)</code> 阿里解决，当递归到 <code>f(k)</code> 是，先看一下，是否已经求解过。如果是，则直接从散列表中取值返回，不需要重复计算；如果不是，则进行求解，并将结果保存。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> hasComputedMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>hasComputedMap<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> hasComputedMap<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  hasComputedMap<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>递归虽然简洁功效，但是递归代码也有很多弊端。比如<strong>堆栈溢出、重复计算、函数调用耗时多、空间复杂度高等</strong>，在写递归代码时，需要考虑和控制好这些副作用。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/niexias/fe-tutorial/edit/master/algo/递归/递归.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">12/26/2019, 2:11:21 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fe-tutorial/algo/栈/栈.html" class="prev">
        栈
      </a></span> <span class="next"><a href="/fe-tutorial/algo/排序/排序.html">
        排序算法介绍
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/fe-tutorial/assets/js/app.c67e16a5.js" defer></script><script src="/fe-tutorial/assets/js/2.16b1dcc2.js" defer></script><script src="/fe-tutorial/assets/js/39.90f3797f.js" defer></script>
  </body>
</html>
